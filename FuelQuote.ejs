<!DOCTYPE html>
<html lang="en">
<head>
  <title>Fuel Quote Request</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel ="stylesheet" href="fuel_quote.css">
</head>
<body>
    <div class="topnav">
        <div class="topnav">
            <a href="home32.html"><i class="fa fa-fw fa-home"></i> Home</a>
            <a href="user_profile.html"><span class="glyphicon glyphicon-user"></span> Profile</a>
            <a class="active" href="fuel_quote.html"><i class="fa fa-fw fa-envelope"></i> Fuel Quote Form</a>
            <a href="fuel_history.html"><span class="glyphicon glyphicon-cloud"></span> Fuel Quote History</a>
              <ul class="nav navbar-nav navbar-right">
        <li><a href="login.html"><span class="glyphicon glyphicon-log-out"></span> Logout</a></li>
      </ul>
      </div>

        <center>
        <h1 style="color:rgb(94, 84, 66)" > Fuel Quote</h3>
            



 <form id="form" action="/fuel_history.html" method="get"> 

    

<label for="gallons_quantity" class="control-label">Gallons Requested</label>
            <input type=number class="form-control" id="gallons_requested_id"
                name="gallons_requested" min ="0" step=any placeholder="0.00" required=true />
<br>

<div class="form-group">
            <label for="delivery_address_id" class="control-label">Delivery Address</label>
            <input type="text" class="form-control"
                id="delivery_address_id" name="delivery_address" value="From client profile" readonly/>
        </div>

        <div class="form-group">
            <label for="delivery_d" class="control-label">Delivery Date</label>
            <body>
                <p> </p>
            </body>
            <input type="date" id="delivery_d" name="Delivery Date" required=true /> 
        </div>
    
            <div class="form-group">
                <label for="price_id" class="control-label">Suggested Price per Gallon</label>
                <input type="text" class="form-control"
                    id="price_id" name="price_per_gallon" value="From pricing module" readonly/>
            </div>



            <div class="form-group">
            <label for="total_id" class="control-label">Amount Due</label>
            <input type="text" class="form-control"
                id="total_id" name="price_per_gallon" value="=gallons * price" readonly/>
        </div>

    <div class="form-group">
            <button type="submit" class="btn btn-primary">Request</button>
        </div>
        </div>



        <footer class="container-fluid text-center">
            <img class="img-rounded" width="80" height="80" src="ntc.png"><p>NTC Fuel Solutions </p>
          <p>All Rights Reserved (2022)</p>
        </footer>
        
</body>
 <script>
 require('PriceModule.JS');



function calculateTotal() {

if ($("#gallons_requested_id").val() < 0 )
{
    $("#gallons_requested_id").val()
    return;
}
let first_time = <%= location_f %>;
let history_factor = 0.0;
let current_price = 1.50;
let location_factor = 0.04;
let state = "<%=user.state%>";
if(!first_time){
    history_factor = 0.01;
}
if(state === "TX") 
{
    location_factor = 0.02;
}
let gallons_factor = 0.03;
if ($("#gallons_requested_id").val() > 1000.00)
{
    gallons_factor = 0.02;
}
let profit_factor = 0.1;
let margin = current_price * (location_factor - history_factor + gallons_factor + profit_factor);
let suggested = current_price + margin;
if (gallons_factor !=0){
    let total=PricingModule.calculate(gallons_factor, current_price);
}
else
{let total = suggested * $("#gallons_requested_id").val();}
$("#price_id").val(suggested);
$("#total_id").val(total.toFixed(2));
}

</script>


        </html>